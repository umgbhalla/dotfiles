/*Copyright (c) 2021 ksoft http://www.dummysoftware.com*/function oJUsv(e){var t=!1;if(e)for(var n=document.querySelectorAll("iframe"),r=0;r<n.length;r++){var s=n[r];try{if(s.contentDocument&&(t=e(s.contentDocument)))break}catch(e){}}return t}function onGetPathClick(e){var t,n=document.getElementsByTagName("body")[0];n.style.cursor="default",n.removeEventListener("click",onGetPathClick),n.removeEventListener("keyup",onGetPathClick),27!==e.keyCode&&(t=createUniqueSelector(e.target),n=`Element Type: ${e.target.tagName}\nId: ${e.target.id||"None"}\nClass: ${e.target.className||"None"}\nText: ${e.target.text||e.target.src||"None"}\nLink: ${e.target.href||"None"}`,chrome.runtime.sendMessage({message:"getPath",id:e.target.id,className:e.target.className,tagName:e.target.tagName,string:n,tabId:e.currentTarget.tabId,value:t})),e.preventDefault()}function isUncommonClassName(t){return!["focus","hover","hidden","visible","dirty","touched","valid","disable","enable","active","col-"].find(e=>t.includes(e))}function getDistinctClassList(n){if(!n.classList||0===n.classList.length)return[];const e=n.parentNode&&Array.from(n.parentNode.children||"")||[];return e.reduce((e,t)=>n===t?e:e.filter(e=>!t.classList.contains(e)),Array.from(n.classList).filter(isUncommonClassName))}chrome.runtime.onMessage.addListener(function autoClickStatusUpdate(request,sender,sendResponse){if(-1!=request.action.indexOf("getAutoClickIdStatus")){var status="",autoClickId=request.action.replace("getAutoClickIdStatus","");if(null!=autoClickId&&0<autoClickId.length){var link=null;try{link=0==autoClickId.indexOf("document.")?eval(autoClickId):document.querySelector(autoClickId)}catch(e){}status=null!=link?"OK":"Error"}sendResponse({result:status})}else if(-1!=request.action.indexOf("findText")){var status=!1,text=request.action.replace("findText","").trim();if(null!=text&&0<text.length){var element=null,regEx,matches;try{element=document.querySelector(text)}catch(e){}element=element||(oJUsv(function(e){return null!=e.querySelector(text)})||null),status=null!=element,status||(regEx=new RegExp(text,"i"),matches=(request.isText?document.body.innerText:document.body.innerHTML).match(regEx),status=matches&&0<matches.length,status=status||oJUsv(function(e){return(matches=(request.isText?e.body.innerText:e.body.innerHTML).match(regEx))&&0<matches.length}))}sendResponse({result:status})}else{var tabId,body;-1!=request.action.indexOf("getPath")&&(tabId=request.action.replace("getPath","").trim(),body=document.getElementsByTagName("body")[0],body.removeEventListener("click",onGetPathClick),body.removeEventListener("keyup",onGetPathClick),body.addEventListener("click",onGetPathClick),body.addEventListener("keyup",onGetPathClick),body.style.cursor="pointer",body.tabId=tabId,sendResponse({result:"OK"}))}chrome.runtime.onMessage.removeListener(autoClickStatusUpdate)});var commonNodes=["div","span","p","b","i","u","strong","em","h2","h3"];function getNthChildString(t,n){const e=t.parentNode&&Array.from(t.parentNode.children||"")||[];return e.find(e=>e!==t&&matchesSelector(e,n))?":nth-child("+(1+e.indexOf(t))+")":""}var createSelector={getElmId(t){if(t.getAttribute("id")){let e=t.getRootNode&&t.getRootNode()||document;const n="#"+escapeSelector(t.getAttribute("id")||"");return n.match(/player_uid_/)||1!==e.querySelectorAll(n).length?void 0:n}},getCustomElm(e,{isCustomElm:t,nodeName:n}){if(t)return n},getElmRoleProp(e){if(e.hasAttribute("role"))return'[role="'+escapeSelector(e.getAttribute("role"))+'"]'},getUncommonElm(e,{isCommonElm:t,isCustomElm:n,nodeName:r}){if(!t&&!n)return"input"===(r=escapeSelector(r))&&e.hasAttribute("type")&&(r+='[type="'+e.type+'"]'),r},getElmNameProp(e){if(!e.hasAttribute("id")&&e.name)return'[name="'+escapeSelector(e.name)+'"]'},getDistinctClass(e,{distinctClassList:t}){if(0<t.length&&t.length<3)return"."+t.map(escapeSelector).join(".")},getFileRefProp(e){let t;if(e.hasAttribute("href"))t="href";else{if(!e.hasAttribute("src"))return;t="src"}e=getFriendlyUriEnd(e.getAttribute(t));if(e)return"["+t+'$="'+encodeURI(e)+'"]'},getCommonName(e,{nodeName:t,isCommonElm:n}){if(n)return t}};function getElmFeatures(r,s){const e=r.nodeName.toLowerCase();var t=Array.from(r.classList)||[];const o={nodeName:e,classList:t,isCustomElm:e.includes("-"),isCommonElm:commonNodes.includes(e),distinctClassList:getDistinctClassList(r)};return[createSelector.getCustomElm,createSelector.getElmRoleProp,createSelector.getUncommonElm,createSelector.getElmNameProp,createSelector.getDistinctClass,createSelector.getFileRefProp,createSelector.getCommonName].reduce((e,t)=>{if(e.length===s)return e;const n=t(r,o);return n&&(n[0].match(/[a-z]/)?e.unshift(n):e.push(n)),e},[])}function generateSelector(e,t,n){let r,s,{isUnique:o=!1}=t;var i=createSelector.getElmId(e),{featureCount:a=2,minDepth:l=1,toRoot:c=!1,childSelectors:u=[]}=t;i?(r=i,o=!0):(r=getElmFeatures(e,a).join(""),r+=getNthChildString(e,r),o=t.isUnique||1===n.querySelectorAll(r).length,o||e!==document.documentElement||(r+=":root"),s=0!==l||!o);const m=[r,...u];return e.parentElement&&11!==e.parentElement.nodeType&&(c||s)?generateSelector(e.parentNode,{toRoot:c,isUnique:o,childSelectors:m,featureCount:1,minDepth:l-1},n):m.join(" > ")}function createUniqueSelector(t,n={}){if(!t)return"";let r=t.getRootNode&&t.getRootNode()||document;if(11!==r.nodeType)return generateSelector(t,n,r);{let e=[];for(;11===r.nodeType;)e.push({elm:t,doc:r}),t=r.host,r=t.getRootNode();return e.push({elm:t,doc:r}),e.reverse().map(e=>generateSelector(e.elm,n,e.doc))}}function escapeSelector(e){return e}var matchesSelector=(()=>{var n;return(e,t)=>!!e[n=!n||!e[n]?function(e){for(var t,n=["matches","matchesSelector","mozMatchesSelector","webkitMatchesSelector","msMatchesSelector"],r=n.length,s=0;s<r;s++)if(e[t=n[s]])return t}(e):n]&&e[n](t)})();function isMostlyNumbers(e=""){return 0!==e.length&&(e.match(/[0-9]/g)||"").length>=e.length/2}function splitString(e,t){return[e.substring(0,t),e.substring(t)]}function trimRight(e){return e.replace(/\s+$/,"")}function uriParser(e){var t=e;let n="",r="",s="",o="",i="";return e.includes("#")&&([e,i]=splitString(e,e.indexOf("#"))),e.includes("?")&&([e,o]=splitString(e,e.indexOf("?"))),e.includes("://")?([n,e]=e.split("://"),[r,e]=splitString(e,e.indexOf("/"))):"//"===e.substr(0,2)&&(e=e.substr(2),[r,e]=splitString(e,e.indexOf("/"))),"www."===r.substr(0,4)&&(r=r.substr(4)),r&&r.includes(":")&&([r,s]=splitString(r,r.indexOf(":"))),{original:t,protocol:n,domain:r,port:s,path:e,query:o,hash:i}}function getFriendlyUriEnd(e="",t={}){if(!(e.length<=1||"data:"===e.substr(0,5)||"javascript:"===e.substr(0,11)||e.includes("?"))){var{currentDomain:n,maxLength:t=25}=t;const{path:r,domain:s,hash:o}=uriParser(e),i=r.substr(r.substr(0,r.length-2).lastIndexOf("/")+1);if(o)return i&&(i+o).length<=t?trimRight(i+o):i.length<2&&2<o.length&&o.length<=t?trimRight(o):void 0;if(s&&s.length<t&&r.length<=1)return trimRight(s+r);if(r==="/"+i&&s&&n&&s!==n&&(s+r).length<=t)return trimRight(s+r);n=i.lastIndexOf(".");return(-1===n||1<n)&&(-1!==n||2<i.length)&&i.length<=t&&!i.match(/index(\.[a-zA-Z]{2-4})?/)&&!isMostlyNumbers(i)?trimRight(i):void 0}}